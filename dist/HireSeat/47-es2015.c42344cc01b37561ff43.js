(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{L8hv:function(e,i,n){"use strict";n.r(i),n.d(i,"CreateAdminModuleNgFactory",(function(){return u}));var s=n("8Y7J");class t{}var a=n("pMnS"),o=n("SVse"),r=n("s7LF"),h=n("iInd");n("VITL"),n("pW6c");class l{constructor(e,i,n,s){this.spinner=e,this.userService=i,this.router=n,this._authService=s,this.onChange=e=>{},this.onTouched=()=>{},this.suBtnActive=!0,this.signin=new r.j({fullname:new r.h,phoneNo:new r.h,email:new r.h,password:new r.h,webSiteLink:new r.h,companyName:new r.h,file:new r.h})}writeValue(e){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}ngOnInit(){JSON.parse(window.localStorage.getItem("currentUser"))}formSubmit(){var e=this.signin.value;const i=JSON.parse(window.localStorage.getItem("currentUser")).userInfo.userRole;this.signin=new r.j({fullname:new r.h(e.fullname,[r.A.required]),phoneNo:new r.h(e.phoneNo,r.A.required),email:new r.h(e.email,[r.A.required,r.A.email]),companyName:new r.h(e.companyName,[r.A.required]),webSiteLink:new r.h(e.webSiteLink,[r.A.required]),password:new r.h(e.password,[r.A.required,r.A.minLength(5)]),file:new r.h(e.file,[])});const n=new FormData;this.localRole="admin",this.userroledata=1,n.append("userRole",this.localRole),n.append("role",this.userroledata),void 0!==this.imagePath&&n.append("file",this.imagePath[0],this.imagePath[0].name),n.append("fullname",this.signin.controls.fullname.value),n.append("phoneNo",this.signin.controls.phoneNo.value),n.append("email",this.signin.controls.email.value),n.append("companyName",this.signin.controls.companyName.value),n.append("webSiteLink",this.signin.controls.webSiteLink.value),n.append("password",this.signin.controls.password.value),this.signin.valid||(Materialize.toast("Please complete the form.",1e3),this.spinner.hide()),"super-admin"===i?(this.spinner.show(),this.suBtnActive=!0,e=this.signin.value,this.signin.valid?(this.spinner.show(),this.userService.register(n).subscribe(e=>{"success"===e.statustxt&&(this.spinner.hide(),this.suBtnActive=!0,jQuery("#registerMsg").modal("open"),this.router.navigate(["/super-admin/user-list"])),this.spinner.hide()},e=>{console.log(e),"Conflict"==e&&(Materialize.toast("Email Id / Phone Number Already Registered !",1e3),this.spinner.hide()),this.suBtnActive=!0,this.spinner.hide()})):(this.suBtnActive=!0,this.spinner.hide())):(this.spinner.hide(),Materialize.toast("Your not an authorized user...!",1e3),this._authService.logout())}preview(e){if(0!==e.length)if(null!=e[0].type.match(/image\/*/)){this.filepath=e[0];var i=new FileReader;this.imagePath=e,i.readAsDataURL(e[0]),i.onload=e=>{this.imgURL=i.result}}else this.message="Only images are supported."}}class p{}var u=s["\u0275cmf"](t,[],(function(e){return s["\u0275mod"]([s["\u0275mpd"](512,s.ComponentFactoryResolver,s["\u0275CodegenComponentFactoryResolver"],[[8,[a.a]],[3,s.ComponentFactoryResolver],s.NgModuleRef]),s["\u0275mpd"](4608,o.NgLocalization,o.NgLocaleLocalization,[s.LOCALE_ID,[2,o["\u0275angular_packages_common_common_a"]]]),s["\u0275mpd"](4608,r.C,r.C,[]),s["\u0275mpd"](4608,r.g,r.g,[]),s["\u0275mpd"](1073742336,o.CommonModule,o.CommonModule,[]),s["\u0275mpd"](1073742336,h.p,h.p,[[2,h.u],[2,h.l]]),s["\u0275mpd"](1073742336,p,p,[]),s["\u0275mpd"](1073742336,r.B,r.B,[]),s["\u0275mpd"](1073742336,r.l,r.l,[]),s["\u0275mpd"](1073742336,r.y,r.y,[]),s["\u0275mpd"](1073742336,t,t,[]),s["\u0275mpd"](1024,h.j,(function(){return[[{path:"",component:l}]]}),[])])}))}}]);